<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jihong">
<meta name="dcterms.date" content="2018-09-04">
<title>Dr.&nbsp;Jihong Zhang - How to do Data Cleaning in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-149871707-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script><link href="https://fonts.googleapis.com/css2?family=Maven+Pro:wght@400&amp;display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@xiee/utils/js/key-buttons.min.js" defer=""></script><link href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/key-buttons.min.css" rel="stylesheet">
<meta property="og:title" content="Dr.&nbsp;Jihong Zhang - How to do Data Cleaning in R">
<meta property="og:description" content="I use tidyverse as my main tool to clean the data. Tidyverse is a very useful package created by Hadley.">
<meta property="og:site-name" content="Dr. Jihong Zhang">
<meta name="twitter:title" content="Dr.&nbsp;Jihong Zhang - How to do Data Cleaning in R">
<meta name="twitter:description" content="I use tidyverse as my main tool to clean the data. Tidyverse is a very useful package created by Hadley.">
<meta name="twitter:creator" content="@jihongzgamma">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html">Blog</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more" role="button" data-bs-toggle="dropdown" aria-expanded="false">More</a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-more">
<li>
    <a class="dropdown-item" href="../../projects.html">
 <span class="dropdown-text">projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../links.html">
 <span class="dropdown-text">About</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#libraries" id="toc-libraries" class="nav-link active" data-scroll-target="#libraries">Libraries</a></li>
  <li><a href="#step-1-import-data" id="toc-step-1-import-data" class="nav-link" data-scroll-target="#step-1-import-data">Step 1: Import Data</a></li>
  <li>
<a href="#step-2-initial-check" id="toc-step-2-initial-check" class="nav-link" data-scroll-target="#step-2-initial-check">Step 2: Initial Check</a>
  <ul class="collapse">
<li><a href="#step-2.1-check-variables" id="toc-step-2.1-check-variables" class="nav-link" data-scroll-target="#step-2.1-check-variables">Step 2.1: check variables</a></li>
  <li><a href="#step-2.2-check-missing-values-and-ranges" id="toc-step-2.2-check-missing-values-and-ranges" class="nav-link" data-scroll-target="#step-2.2-check-missing-values-and-ranges">step 2.2: check missing values and ranges</a></li>
  <li><a href="#step-2.3-check-first-and-last-cases" id="toc-step-2.3-check-first-and-last-cases" class="nav-link" data-scroll-target="#step-2.3-check-first-and-last-cases">step 2.3: check first and last cases</a></li>
  </ul>
</li>
  <li><a href="#step-3-select-and-rename-variables" id="toc-step-3-select-and-rename-variables" class="nav-link" data-scroll-target="#step-3-select-and-rename-variables">Step 3: Select and rename Variables</a></li>
  <li><a href="#step-4-remove-missing-values" id="toc-step-4-remove-missing-values" class="nav-link" data-scroll-target="#step-4-remove-missing-values">Step 4: Remove missing values</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">How to do Data Cleaning in R</h1>
  <div class="quarto-categories">
    <div class="quarto-category">blog</div>
    <div class="quarto-category">R</div>
    <div class="quarto-category">tidyverse</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jihong </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 4, 2018</p>
    </div>
  </div>
    
  </div>
  

</header><blockquote class="blockquote">
<p>This blog is trying to elaborate steps for cleaning the data. Since datasets varied, this blog could not cover all. Depedent on the data you’re using, different methods should be used.</p>
</blockquote>
<section id="libraries" class="level2"><h2 class="anchored" data-anchor-id="libraries">Libraries</h2>
<p>I use tidyverse as my main tool to clean the data. Tidyverse is a very useful package created by Hadley. It includes several sub-packages, such as dplyr (data manipulation), tidyr (data transforming), readr (data import), ggplot2 (data visulization) etc. If you haven’t installed this package yet, please run <code>install.packages("tidyverse")</code> in your R console.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="step-1-import-data" class="level2"><h2 class="anchored" data-anchor-id="step-1-import-data">Step 1: Import Data</h2>
<p>If your data is csv format, you could use <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> to import the data into R. Be careful to add <code>stringsAsFactors = FALSE</code> argument in the function, or all string variables will automate convert to factor by default. This will lead to some issues when you do further checking. # Configuration of Academic # Documentation: <a href="https://sourcethemes.com/academic/" class="uri">https://sourcethemes.com/academic/</a> # # This file is formatted using TOML syntax - learn more at <a href="https://learnxinyminutes.com/docs/toml/" class="uri">https://learnxinyminutes.com/docs/toml/</a> # Each configuration section is defined by a name in square brackets (e.g.&nbsp;<code>[outputs]</code>).</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"nfl_2010-2017.csv"</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="step-2-initial-check" class="level2"><h2 class="anchored" data-anchor-id="step-2-initial-check">Step 2: Initial Check</h2>
<p>Perform some initial check before doing further manipulation. This step is to let you get familiar with you data and have a big picture on what you need to do next.</p>
<section id="step-2.1-check-variables" class="level3"><h3 class="anchored" data-anchor-id="step-2.1-check-variables">Step 2.1: check variables</h3>
<p><code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> is a very useful fuction in R base package which provides you sample sizes, number of variabels, variables names, variabile types and several sample responses. In the sample data, there are 81,525 observations and 23 variables.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   81525 obs. of  23 variables:
 $ X           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ name        : chr  "Duce Staley" "Lamar Smith" "Tiki Barber" "Stephen Davis" ...
 $ team        : chr  "PHI" "MIA" "NYG" "WAS" ...
 $ game_year   : int  2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...
 $ game_week   : int  1 1 1 1 1 1 1 1 1 1 ...
 $ rush_att    : int  26 27 13 23 28 27 30 14 15 10 ...
 $ rush_yds    : int  201 145 144 133 124 119 110 109 88 87 ...
 $ rush_avg    : num  7.7 5.4 11.1 5.8 4.4 4.4 3.7 7.8 5.9 8.7 ...
 $ rush_tds    : int  1 1 2 1 1 0 1 0 0 1 ...
 $ rush_fumbles: int  0 1 0 0 1 0 0 0 0 0 ...
 $ rec         : int  4 1 3 4 6 4 6 2 2 NA ...
 $ rec_yds     : int  61 12 25 37 40 32 34 3 20 NA ...
 $ rec_avg     : num  15.3 12 8.3 9.3 6.7 8 5.7 1.5 10 NA ...
 $ rec_tds     : int  0 0 0 0 1 0 1 0 0 NA ...
 $ rec_fumbles : int  0 0 0 0 0 0 0 0 0 NA ...
 $ pass_att    : int  NA NA NA NA NA NA NA NA NA 41 ...
 $ pass_yds    : int  NA NA NA NA NA NA NA NA NA 290 ...
 $ pass_tds    : int  NA NA NA NA NA NA NA NA NA 2 ...
 $ int         : int  NA NA NA NA NA NA NA NA NA 0 ...
 $ sck         : int  NA NA NA NA NA NA NA NA NA 2 ...
 $ pass_fumbles: int  NA NA NA NA NA NA NA NA NA 0 ...
 $ rate        : num  NA NA NA NA NA ...
 $ position    : chr  "RB" "RB" "RB" "RB" ...</code></pre>
</div>
</div>
</section><section id="step-2.2-check-missing-values-and-ranges" class="level3"><h3 class="anchored" data-anchor-id="step-2.2-check-missing-values-and-ranges">step 2.2: check missing values and ranges</h3>
<p>Missing values could be checked one by one variables or in case-level. Knowing which one or more variablea have high missing values will help you think about the reasons.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       X             name               team             game_year   
 Min.   :    1   Length:81525       Length:81525       Min.   :2000  
 1st Qu.:20382   Class :character   Class :character   1st Qu.:2004  
 Median :40763   Mode  :character   Mode  :character   Median :2009  
 Mean   :40763                                         Mean   :2009  
 3rd Qu.:61144                                         3rd Qu.:2013  
 Max.   :81525                                         Max.   :2017  
                                                                     
   game_week         rush_att        rush_yds         rush_avg     
 Min.   : 1.000   Min.   : 0.00   Min.   :-34.00   Min.   :-34.00  
 1st Qu.: 4.000   1st Qu.: 1.00   1st Qu.:  4.00   1st Qu.:  2.00  
 Median : 9.000   Median : 4.00   Median : 15.00   Median :  3.50  
 Mean   : 8.592   Mean   : 6.96   Mean   : 28.91   Mean   :  4.05  
 3rd Qu.:13.000   3rd Qu.:10.00   3rd Qu.: 42.00   3rd Qu.:  5.30  
 Max.   :16.000   Max.   :43.00   Max.   :296.00   Max.   : 77.00  
                  NA's   :47710   NA's   :47710    NA's   :47710   
    rush_tds      rush_fumbles        rec            rec_yds      
 Min.   :0.00    Min.   :0.00    Min.   : 0.000   Min.   :-22.00  
 1st Qu.:0.00    1st Qu.:0.00    1st Qu.: 1.000   1st Qu.:  8.00  
 Median :0.00    Median :0.00    Median : 2.000   Median : 21.00  
 Mean   :0.21    Mean   :0.08    Mean   : 2.716   Mean   : 31.23  
 3rd Qu.:0.00    3rd Qu.:0.00    3rd Qu.: 4.000   3rd Qu.: 45.00  
 Max.   :5.00    Max.   :3.00    Max.   :21.000   Max.   :329.00  
 NA's   :47710   NA's   :47710   NA's   :16722    NA's   :16722   
    rec_avg          rec_tds       rec_fumbles       pass_att    
 Min.   :-22.00   Min.   :0.000   Min.   :0.000   Min.   : 0.00  
 1st Qu.:  5.10   1st Qu.:0.000   1st Qu.:0.000   1st Qu.:21.00  
 Median :  9.00   Median :0.000   Median :0.000   Median :30.00  
 Mean   : 10.15   Mean   :0.188   Mean   :0.032   Mean   :27.64  
 3rd Qu.: 13.50   3rd Qu.:0.000   3rd Qu.:0.000   3rd Qu.:37.00  
 Max.   : 99.00   Max.   :4.000   Max.   :2.000   Max.   :68.00  
 NA's   :16722    NA's   :16722   NA's   :16722   NA's   :71044  
    pass_yds        pass_tds          int             sck       
 Min.   :-11.0   Min.   :0.00    Min.   :0.0     Min.   : 0.00  
 1st Qu.:126.0   1st Qu.:0.00    1st Qu.:0.0     1st Qu.: 1.00  
 Median :204.0   Median :1.00    Median :1.0     Median : 2.00  
 Mean   :193.1   Mean   :1.16    Mean   :0.8     Mean   : 1.88  
 3rd Qu.:267.0   3rd Qu.:2.00    3rd Qu.:1.0     3rd Qu.: 3.00  
 Max.   :527.0   Max.   :7.00    Max.   :7.0     Max.   :12.00  
 NA's   :71044   NA's   :71044   NA's   :71044   NA's   :71044  
  pass_fumbles        rate          position        
 Min.   :0.00    Min.   :  0.00   Length:81525      
 1st Qu.:0.00    1st Qu.: 60.20   Class :character  
 Median :0.00    Median : 82.10   Mode  :character  
 Mean   :0.15    Mean   : 81.57                     
 3rd Qu.:0.00    3rd Qu.:103.20                     
 Max.   :3.00    Max.   :158.30                     
 NA's   :71044   NA's   :71044                      </code></pre>
</div>
</div>
<p>In this sample, variables <strong>rush_att, rush_yds, rush_avg, rush_tds, rush_fumbles</strong> have 47,710 missing values; variables <strong>rec, rec_yds, rec_avg, rec_tds, rec_fumbles</strong> have 16,722 missing values, variables <strong>pass_att, pass_yds, pass_tds, int, sck, pass_fumbles, rate</strong> have 71,044 missing values.</p>
<p>Also, look at the range (Min., Max.) of variables in <code>summary</code> output, sometimes the responses may exceed expected range. You may have to delete those cases in this situation.</p>
</section><section id="step-2.3-check-first-and-last-cases" class="level3"><h3 class="anchored" data-anchor-id="step-2.3-check-first-and-last-cases">step 2.3: check first and last cases</h3>
<p>Sometimes you may find the second row of data including some information you don’t want. For example, Qualtrics survey data will put some background log information in row 2. Thus, it’s better to check the head and tail of dataset. You can use functions below:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X           name team game_year game_week rush_att rush_yds rush_avg rush_tds
1 1    Duce Staley  PHI      2000         1       26      201      7.7        1
2 2    Lamar Smith  MIA      2000         1       27      145      5.4        1
3 3    Tiki Barber  NYG      2000         1       13      144     11.1        2
4 4  Stephen Davis  WAS      2000         1       23      133      5.8        1
5 5 Edgerrin James  IND      2000         1       28      124      4.4        1
6 6  Priest Holmes  BAL      2000         1       27      119      4.4        0
  rush_fumbles rec rec_yds rec_avg rec_tds rec_fumbles pass_att pass_yds
1            0   4      61    15.3       0           0       NA       NA
2            1   1      12    12.0       0           0       NA       NA
3            0   3      25     8.3       0           0       NA       NA
4            0   4      37     9.3       0           0       NA       NA
5            1   6      40     6.7       1           0       NA       NA
6            0   4      32     8.0       0           0       NA       NA
  pass_tds int sck pass_fumbles rate position
1       NA  NA  NA           NA   NA       RB
2       NA  NA  NA           NA   NA       RB
3       NA  NA  NA           NA   NA       RB
4       NA  NA  NA           NA   NA       RB
5       NA  NA  NA           NA   NA       RB
6       NA  NA  NA           NA   NA       RB</code></pre>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">dat1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          X           name team game_year game_week rush_att rush_yds rush_avg
81520 81520     Jared Goff   LA      2017        15       NA       NA       NA
81521 81521    Andy Dalton  CIN      2017        15       NA       NA       NA
81522 81522 Trevor Siemian  DEN      2017        15       NA       NA       NA
81523 81523  A.J. McCarron  CIN      2017        15       NA       NA       NA
81524 81524 Derek Anderson  CAR      2017        16       NA       NA       NA
81525 81525  Johnny Hekker   LA      2017        16       NA       NA       NA
      rush_tds rush_fumbles rec rec_yds rec_avg rec_tds rec_fumbles pass_att
81520       NA           NA  NA      NA      NA      NA          NA       21
81521       NA           NA  NA      NA      NA      NA          NA       22
81522       NA           NA  NA      NA      NA      NA          NA        9
81523       NA           NA  NA      NA      NA      NA          NA        6
81524       NA           NA  NA      NA      NA      NA          NA        1
81525       NA           NA  NA      NA      NA      NA          NA        1
      pass_yds pass_tds int sck pass_fumbles rate position
81520      120        2   1   2            0 93.4       QB
81521      113        0   2   3            0 27.3       QB
81522       67        0   1   2            0 39.8       QB
81523       19        0   0   0            0 56.9       QB
81524        0        0   0   0            0 39.6    WR/TE
81525        0        0   0   0            0 39.6    WR/TE</code></pre>
</div>
</div>
<p>The R output provide first 6 cases and last 6 case. You can use <code>head(dat1, 10)</code> to output first 10 cases.</p>
</section></section><section id="step-3-select-and-rename-variables" class="level2"><h2 class="anchored" data-anchor-id="step-3-select-and-rename-variables">Step 3: Select and rename Variables</h2>
<p>After initial checks, some basic data cleaning could be done. You may want to select some variables you want and remove others. You can use <code>select</code> function to do that:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="va">dat1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">team</span>, <span class="va">pass_att</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I selected 3 variables (name, team, pass_att) from the dat1 and assign 3-variables data to “dat2”.</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            name team pass_att
1    Duce Staley  PHI       NA
2    Lamar Smith  MIA       NA
3    Tiki Barber  NYG       NA
4  Stephen Davis  WAS       NA
5 Edgerrin James  IND       NA
6  Priest Holmes  BAL       NA</code></pre>
</div>
</div>
<p>To rename the variables’ names, you could use <code><a href="https://rlang.r-lib.org/reference/set_names.html">set_names()</a></code> from purrr packages.</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span><span class="op">(</span>nm <span class="op">=</span> <span class="st">"Players"</span>, <span class="st">"Team"</span>, <span class="st">"Pass_Attribute"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Players Team Pass_Attribute
1    Duce Staley  PHI             NA
2    Lamar Smith  MIA             NA
3    Tiki Barber  NYG             NA
4  Stephen Davis  WAS             NA
5 Edgerrin James  IND             NA
6  Priest Holmes  BAL             NA</code></pre>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html">set_names</a></span><span class="op">(</span>nm <span class="op">=</span> <span class="st">"V1"</span>, <span class="st">"V2"</span>, <span class="st">"V3"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              V1  V2 V3
1    Duce Staley PHI NA
2    Lamar Smith MIA NA
3    Tiki Barber NYG NA
4  Stephen Davis WAS NA
5 Edgerrin James IND NA
6  Priest Holmes BAL NA</code></pre>
</div>
</div>
</section><section id="step-4-remove-missing-values" class="level2"><h2 class="anchored" data-anchor-id="step-4-remove-missing-values">Step 4: Remove missing values</h2>
<p>If you prefer cases with no missing cases at all. You can use the function below.</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat_complete_cases</span> <span class="op">&lt;-</span> <span class="va">dat2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter_all.html">filter_all</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/all_vars.html">all_vars</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">dat_complete_cases</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name               team              pass_att    
 Length:10481       Length:10481       Min.   : 0.00  
 Class :character   Class :character   1st Qu.:21.00  
 Mode  :character   Mode  :character   Median :30.00  
                                       Mean   :27.64  
                                       3rd Qu.:37.00  
                                       Max.   :68.00  </code></pre>
</div>
</div>
<p>Or if you want remove the cases whose <strong>Pass_Attribute</strong> is missing, you can use:</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat_partialcomplete_cases</span> <span class="op">&lt;-</span> <span class="va">dat2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">pass_att</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">dat_complete_cases</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name               team              pass_att    
 Length:10481       Length:10481       Min.   : 0.00  
 Class :character   Class :character   1st Qu.:21.00  
 Mode  :character   Mode  :character   Median :30.00  
                                       Mean   :27.64  
                                       3rd Qu.:37.00  
                                       Max.   :68.00  </code></pre>
</div>
</div>
<p>To be continued…</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><script src="https://giscus.app/client.js" data-repo="JihongZ/quarto-academic-jihong" data-repo-id="R_kgDOJz3gyg" data-category="General" data-category-id="DIC_kwDOJz3gys4CXdYE" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>